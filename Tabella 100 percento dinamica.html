<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      class Tabella {
        nomiColonne;
        data;

        constructor(nomiColonne, data) {
          this.nomiColonne = nomiColonne;
          this.data = data;
          this.generaTabella();
        }

        generaTabella() {
          const tabella = document.createElement("table");
          tabella.appendChild(this.generaColonne());
          tabella.appendChild(this.generaRighe());
          document.querySelector("body").appendChild(tabella);
        }

        generaColonne() {
          const thead = document.createElement("thead");
          this.nomiColonne.forEach((nomeColonna) => {
            const th = document.createElement("th");
            const text = document.createTextNode(nomeColonna);
            th.appendChild(text);
            thead.appendChild(th);
          });
          return thead;
        }

        generaRighe() {
          const tbody = document.createElement("tbody");
          this.data.forEach((riga) => {
            const tr = document.createElement("tr");
            Object.keys(riga).forEach((key) => {
              let cella = document.createElement("td")
              let text = document.createTextNode(riga[key])
              cella.appendChild(text)
              tr.appendChild(cella)
            });
            tbody.appendChild(tr)
          });
          return tbody
        }
      }

      const nomiColonne = [
        "id",
        "nome",
        "cognome",
        "email",
        "codiceFiscale",
        "indirizzo",
      ];

      const data1 = [
        {
          id: 1,
          nome: "Mario",
          cognome: "Rossi",
          email: "mario.rossi@example.com",
          codiceFiscale: "RSSMRA85M01H501Z",
          indirizzo: "Via Roma 1, Milano",
        },
        {
          id: 2,
          nome: "Luca",
          cognome: "Bianchi",
          email: "luca.bianchi@example.com",
          codiceFiscale: "BNCPLC90A01H501U",
          indirizzo: "Corso Italia 5, Torino",
        },
      ];

      // const data2 = {
      //   id: 2,
      //   nome: "Luca",
      //   cognome: "Bianchi",
      //   email: "luca.bianchi@example.com",
      //   codiceFiscale: "BNCPLC90A01H501U",
      //   indirizzo: "Corso Italia 5, Torino",
      // };

      const tabella1 = new Tabella(nomiColonne, data1);
      const tabella2 = new Tabella(nomiColonne, data1);
    </script>
  </body>
</html>
